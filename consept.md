# AIお絵描き

これは５歳児向けのAIお絵描きアプリです。
音声入力でお題を指示して、画像生成AIのAPIまたはJavaScriptとCanvasを使って画像を生成します。

## 生成モード

### 画像生成モード

- 画像生成APIを用いて画像を生成します。
- 画像生成APIは英語でないと正確に描画できないことが多いので、LLMを使って英語プロンプトに変換してから送信します。
- API Key はサーバーサイドに置き、APIから呼び出します。
- Safety Filter は決して実装しないでください。
- 画像生成モデルはライブラリで抽象化して、異なるモデルに切り替えやすい設計にします。
- ユーザーがモデルを切り替えることはありません。モデルの切り替えUIは不要です。

### キャンバスモード

- JavaScriptとCanvasを使ってクライアントサイドで描画します。
- JavaScriptをLLMで生成したのち、クライアントサイドで実行します。
- 実行はシンプルに `eval` で行います。
- セキュリティ対策やサンドボックスは不要です。
- 完全に自由生成だと実行時エラーが出る可能性が高いので、 `ctx` という変数名でCanvasを参照するようにしてください。

## 使い方

1. 音声入力でお題を指示します。
2. 画像を生成され、表示されます。
3. 画像モードとキャンバスモードを切り替えられます。

## UI

- 縦に長い画面
  - 画像表示エリア
- 画面下部にメニュー
  - 検出した文字列
  - マイクボタン
  - モード切り替えボタン (画像モード/キャンバスモード)

## 重要な仕様

- 送信ボタンはありません。音声認識を開始すると、音声をある程度認識 (debounce) したら、それを自動的に送信します。
- 新しい画像は画像表示エリアの一番上に挿入されます。

## 技術選定

- 音声認識: Web Speech API (ja-JP)
- プロンプト生成: Gemini 2.5 Flash-Lite
- 画像生成: Imagen 4 Fast
- キャンバス: HTML5 Canvas + JavaScript (eval)
- UI: Vite / React / TypeScript
- Serverless: Cloudflare Workers
- Backend: Hono.js
